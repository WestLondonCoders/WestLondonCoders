- set_page_title("New post")

.m-post-editor
  %h1 New post
  %p
    Your posts appear on
    = link_to "your profile", user_path(current_user)
    and the
    = link_to "blog posts", posts_path
    page. It can be a blog post or even just a link to something cool.

  = form_for @post do |f|
    .m-post-editor__title
      %h1= f.text_field :title, placeholder: "Title"
    .m-post-editor__content
      = f.text_area :content, class: 'medium-editor'

    .m-post-editor__options
      %h2 Sharing options

      - if user_is_author
        = f.check_box :featured
        = f.label :featured, "Show this post on the home page"

      %p
        Below are the page description and image that appears on the link to your post when it's shared. You can preview this on
        = link_to "Twitter", "https://cards-dev.twitter.com/validator"
        and
        = link_to "Facebook", "https://developers.facebook.com/tools/debug/"
        after you've saved the post. You can edit it anytime.
      %p
        %i.fa.fa-twitter
        %i.fa.fa-facebook
        Description
      = f.text_field :description, value: "I wrote a post on West London Coders"
      %p
        %i.fa.fa-twitter
        %i.fa.fa-facebook
        Image URL
      = f.text_field :twitter_image, value: asset_url("general/twitter.jpg")

      %h2 Tags
      %p
        Tags make it easier to find posts on Google and when people search the site.
      .a-tags
        = f.fields_for :tags do |tag|
          .nested-fields
            .field.a-tags--form
              - if tag.object.persisted?
                %h1.a-tag.a-tag--page-tag
                  = tag.object.name
                  = link_to_remove_association "x", tag, class: 'a-tag--remove'
              - else
                = tag.text_field :name
      .links
        = link_to_add_association 'Add', f, :tags, class: 'a-button a-button--ghost', id: 'js-add'

    .u-center
      .m-post-editor__submit
        - if current_page?('/posts/new')
          = link_to "Cancel", posts_path, class: 'a-button a-button--ghost'
          = f.submit 'Publish', class: 'a-button'
        - else
          = link_to "Delete", @post, method: :delete, data: { confirm: 'Delete post?' }, class: 'a-button a-button--ghost'
          = link_to "Cancel", post_path(@post), class: 'a-button a-button--ghost'
          = f.submit 'Save changes', class: 'a-button'

:javascript
  var editor = new MediumEditor('.medium-editor', {
    placeholder: {
      text: 'Write your post...',
      hideOnClick: true
  },
    paste: {
        forcePlainText: true,
        cleanPastedHTML: false
    },
    toolbar: {
        buttons: [
            'bold',
            'italic',
            'h2',
            'h3',
            {
                name: 'justifyLeft',
                contentDefault: '<i class="fa fa-align-left"></i>',
            },
            {
                name: 'justifyCenter',
                contentDefault: '<i class="fa fa-align-center"></i>',
            },
            {
                name: 'justifyRight',
                contentDefault: '<i class="fa fa-align-right"></i>',
            },
            {
                name: 'quote',
                contentDefault: '<i class="fa fa-code"></i>',
            },
            {
                name: 'anchor',
                contentDefault: '<i class="fa fa-link"></i>',
            },
        ]
    }
  });

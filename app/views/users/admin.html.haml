.a-page-holder
  %section.a-section
    .a-content--xwide
      %h1.u-center
        Admin
      .m-admin
        %h1 Roles
        .m-admin__roles
          - @roles.each do |role|
            .m-admin__user
              .m-admin__user-name
                = role.name
              .m-admin__user-permission
              .m-admin__user-submit
                - if can? :update, role
                  = link_to 'Edit', edit_role_path(role), class: 'a-button'

        .u-margin-top.u-right
          = link_to 'New role', new_role_path, class: 'a-button'

        %h1 Members
        .m-admin__user
          .m-admin__user-name
            %strong Name
          .m-admin__user-own-hackroom-count
            %strong Hackrooms maintained
          .m-admin__user-hackroom-count
            %strong Hackrooms participating in
          .m-admin__user-permission
            %strong Roles
          .m-admin__user-submit
        - @users.each do |user|
          = form_for user do |f|
            .m-admin__user
              .m-admin__user-name
                = f.text_field :name
              .m-admin__user-own-hackroom-count
                = pluralize(user.own_hackrooms.count, 'hackroom')
              .m-admin__user-hackroom-count
                = pluralize(user.hackrooms.count, 'hackroom')
              .m-admin__user-permission
                = f.collection_check_boxes :role_ids, Role.all, :id, :name do |b|
                  .m-form__checkbox
                    = b.check_box
                    = b.label
              .m-admin__user-submit
                = f.submit 'Update', class: 'a-button'
